# Feature Plan: System Theme Preference (FR11.1-Enhancement)

**Feature ID:** FR11.1-Enhancement  
**Title:** Add "System" Theme Option  
**Priority:** P3  
**Category:** UX Improvements  
**GitHub Issue:** #192

---

## 1. Objective

Add a "System" theme option that dynamically follows the OS light/dark mode preference, in addition to the existing Light and Dark options.

---

## 2. Current Behavior

- First visit → Respects system preference ✅
- After toggle → Locks to light/dark, ignores system changes ❌
- No way to return to "follow system" behavior

---

## 3. Design

### Theme Options

| Option | Behavior |
|--------|----------|
| Light | Always light mode |
| Dark | Always dark mode |
| **System** | Follows `prefers-color-scheme` dynamically |

### UI Changes

Replace toggle button with 3-option selector:
- Icon-based: Sun (Light) / Moon (Dark) / Auto (System)
- Or dropdown

---

## 4. Technical Design

### ThemeContext.tsx Changes

```typescript
type Theme = 'light' | 'dark' | 'system';

interface ThemeContextType {
  theme: Theme;
  setTheme: (theme: Theme) => void;
  isDarkMode: boolean; // Computed: actual current mode
}
```

### Logic

```typescript
// Compute actual dark mode from theme setting
const isDarkMode = useMemo(() => {
  if (theme === 'system') {
    return systemPrefersDark;
  }
  return theme === 'dark';
}, [theme, systemPrefersDark]);
```

---

## 5. Acceptance Criteria

- [ ] Theme selector shows Light/Dark/System options
- [ ] "System" follows OS prefers-color-scheme
- [ ] OS changes reflected immediately when "System" selected
- [ ] User preference persisted in localStorage
- [ ] Existing isDarkMode consumers continue to work

---

## 6. Files to Modify

| File | Changes |
|------|---------|
| `frontend/src/context/ThemeContext.tsx` | Add Theme type, setTheme, system handling |
| `frontend/src/components/NavBar.tsx` | Replace toggle with 3-option selector |
